<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Util (lmn.Util)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">lmn</a> &#x00BB; Util</nav><h1>Module <code>Util</code></h1><p>Utility functions.</p><ul><li>基本的なコンビネータ，双方向連結リストなど</li></ul></header><div><div class="spec include"><div class="doc"><p>include basic combinators</p><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../Util__/index.html#module-Combinator">Util__.Combinator</a></code></span></summary><aside><p>基本的なコンビネータなど</p></aside><aside><p>some very basic combinators</p></aside><dl><dt class="spec value" id="val-flip"><a href="#val-flip" class="anchor"></a><code><span class="keyword">val</span> flip : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'c</span></code></dt><dt class="spec value" id="val-id"><a href="#val-id" class="anchor"></a><code><span class="keyword">val</span> id : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-const"><a href="#val-const" class="anchor"></a><code><span class="keyword">val</span> const : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-curry"><a href="#val-curry" class="anchor"></a><code><span class="keyword">val</span> curry : <span>(<span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span></code></dt><dt class="spec value" id="val-uncurry"><a href="#val-uncurry" class="anchor"></a><code><span class="keyword">val</span> uncurry : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>)</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'c</span></code></dt></dl><aside><p>tuple の操作のためのコンビネータ</p></aside><dl><dt class="spec value" id="val-first"><a href="#val-first" class="anchor"></a><code><span class="keyword">val</span> first : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> * <span class="type-var">'c</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> * <span class="type-var">'c</span></code></dt><dt class="spec value" id="val-second"><a href="#val-second" class="anchor"></a><code><span class="keyword">val</span> second : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'c</span> * <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> * <span class="type-var">'b</span></code></dt><dt class="spec value" id="val-both"><a href="#val-both" class="anchor"></a><code><span class="keyword">val</span> both : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> * <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> * <span class="type-var">'b</span></code></dt><dt class="spec value" id="val-pair"><a href="#val-pair" class="anchor"></a><code><span class="keyword">val</span> pair : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> * <span class="type-var">'b</span></code></dt><dt class="spec value" id="val-swap"><a href="#val-swap" class="anchor"></a><code><span class="keyword">val</span> swap : <span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> * <span class="type-var">'a</span></code></dt></dl><aside><p>compositional functions</p></aside><dl><dt class="spec value" id="val-(&lt;.)"><a href="#val-(&lt;.)" class="anchor"></a><code><span class="keyword">val</span> (&lt;.) : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dt class="spec value" id="val-(&lt;..)"><a href="#val-(&lt;..)" class="anchor"></a><code><span class="keyword">val</span> (&lt;..) : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'d</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'d</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dt class="spec value" id="val-(&lt;...)"><a href="#val-(&lt;...)" class="anchor"></a><code><span class="keyword">val</span> (&lt;...) : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'d</span> <span>&#45;&gt;</span> <span class="type-var">'e</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'d</span> <span>&#45;&gt;</span> <span class="type-var">'e</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt></dl><aside><p>monadic combinators for the Option type</p></aside><dl><dt class="spec value" id="val-(&gt;&gt;=)"><a href="#val-(&gt;&gt;=)" class="anchor"></a><code><span class="keyword">val</span> (&gt;&gt;=) : <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span></code></dt><dt class="spec value" id="val-let*"><a href="#val-let*" class="anchor"></a><code><span class="keyword">val</span> let* : <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span></code></dt><dt class="spec value" id="val-(&lt;$&gt;)"><a href="#val-(&lt;$&gt;)" class="anchor"></a><code><span class="keyword">val</span> (&lt;$&gt;) : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span></code></dt><dt class="spec value" id="val-let+"><a href="#val-let+" class="anchor"></a><code><span class="keyword">val</span> let+ : <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span></code></dt><dt class="spec value" id="val-(&lt;|&gt;)"><a href="#val-(&lt;|&gt;)" class="anchor"></a><code><span class="keyword">val</span> (&lt;|&gt;) : <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span>(unit <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span></code></dt><dt class="spec value" id="val-one_of"><a href="#val-one_of" class="anchor"></a><code><span class="keyword">val</span> one_of : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span></code></dt><dd><p>f を適用してどれか一つでも Some を返したらそれを返して終わりにする</p></dd></dl><dl><dt class="spec value" id="val-maybe"><a href="#val-maybe" class="anchor"></a><code><span class="keyword">val</span> maybe : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt></dl><aside><p>monadic combinators for the traversible type</p></aside><dl><dt class="spec value" id="val-(&lt;::&gt;)"><a href="#val-(&lt;::&gt;)" class="anchor"></a><code><span class="keyword">val</span> (&lt;::&gt;) : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> list</span> option</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> list</span> option</span></code></dt><dd><p>monadic cons</p></dd></dl><dl><dt class="spec value" id="val-foldM"><a href="#val-foldM" class="anchor"></a><code><span class="keyword">val</span> foldM : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span></code></dt><dd><p>monadic <code>fold_left</code></p><ul><li>f を適用して，Some が帰ってきたら fold を続ける．</li><li>もし一度でも None が帰ってきたら，None を返す</li></ul></dd></dl></details></div></div></div><dl><dt class="spec module" id="module-DList"><a href="#module-DList" class="anchor"></a><code><span class="keyword">module</span> DList = <a href="../Util__/index.html#module-Dlist">Util__.Dlist</a></code></dt><dd><p>load Doubly linked list</p></dd></dl><aside><p>その他の共用関数</p></aside><dl><dt class="spec value" id="val-partitionEithers"><a href="#val-partitionEithers" class="anchor"></a><code><span class="keyword">val</span> partitionEithers : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> Stdlib.Either.t</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span> * <span><span class="type-var">'b</span> list</span></code></dt><dd><p>Either 型の要素のリストを左右に振り分ける</p></dd></dl><aside><p>入出力のための関数</p></aside><dl><dt class="spec value" id="val-read_file"><a href="#val-read_file" class="anchor"></a><code><span class="keyword">val</span> read_file : string <span>&#45;&gt;</span> string</code></dt><dd><p>read lines from the given file</p></dd></dl><dl><dt class="spec value" id="val-indent"><a href="#val-indent" class="anchor"></a><code><span class="keyword">val</span> indent : int <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string</code></dt><dd><p>Add 4 * n white spaces to the head of the string</p><ul><li><code>&quot;\t&quot;</code> の方が良いかも</li></ul></dd></dl><aside><p>リスト系の追加関数</p><ul><li>List.Extra モジュールなどとして定義した方が良いかも</li></ul></aside><dl><dt class="spec value" id="val-index_of"><a href="#val-index_of" class="anchor"></a><code><span class="keyword">val</span> index_of : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span>int option</span></code></dt><dd><p>リストの要素の添字番号を取得する</p></dd></dl><dl><dt class="spec value" id="val-fold_left_map2"><a href="#val-fold_left_map2" class="anchor"></a><code><span class="keyword">val</span> fold_left_map2 : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> * <span>(<span class="type-var">'c</span> * <span><span class="type-var">'d</span> list</span>)</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> * <span>(<span><span class="type-var">'c</span> list</span> * <span><span class="type-var">'d</span> list</span>)</span></code></dt><dd><p><code>('a -&gt; 'b -&gt; 'a * ('c * 'd list)) -&gt; 'a -&gt; 'b list -&gt; 'a * ('c list * 'd list)</code> 2重の fold_left_map．</p></dd></dl><dl><dt class="spec value" id="val-rev_break_opt"><a href="#val-rev_break_opt" class="anchor"></a><code><span class="keyword">val</span> rev_break_opt : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span> * <span>(<span><span class="type-var">'a</span> list</span> * <span><span class="type-var">'a</span> list</span>)</span>)</span> option</span></code></dt><dd><p>要素に Option を返す関数を適用して，初めて Some になったところでリストを分割する</p><ul><li>Some になった値も返す</li><li>None になった部分のリストは反転して返すことに注意</li><li><code>rev_appned</code> をすると元のリストから一つ要素を除いたものになる</li><li><code>break_opt (fun x -&gt; if x &gt; 3 then Some x else None) [1; 2; 3; 4; 5; 6]
    ---&gt; Some (4, ([3; 2; 1], [5; 6]))
    </code></li><li>Tail-recursive</li></ul><dl><dt>returns</dt><dd><p>a list, (Some (f a, a list) | None)</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-rev_concat_append"><a href="#val-rev_concat_append" class="anchor"></a><code><span class="keyword">val</span> rev_concat_append : <span><span><span class="type-var">'a</span> list</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span></code></dt><dd><p>Tail-recursive List.concat with List.rev_append</p><ul><li>リストのリストを反転させながら結合する</li><li><code>rev_concat [[6; 5; 4]; [3; 2]; [1]] [7; 8]
    ---&gt; rev_append [1] (rev_append [3; 2] (rev_append [6; 5; 4] [7; 8]))
    ---&gt; [1; 2; 3; 4; 5; 6; 7; 8]
    </code></li></ul></dd></dl><dl><dt class="spec value" id="val-rev_concat"><a href="#val-rev_concat" class="anchor"></a><code><span class="keyword">val</span> rev_concat : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span></code></dt><dd><p>Tail-recursive List.concat</p><ul><li>リストのリストを反転させながら結合する</li><li><code>rev_concat [[1; 2; 3]; [4; 5]; [6]]
    ---&gt; rev_append [6] (rev_append [4; 5] (rev_append [1; 2; 3] []))
    ---&gt; [6; 5; 4; 3; 2; 1]
    </code></li></ul></dd></dl><dl><dt class="spec value" id="val-fold_lefti"><a href="#val-fold_lefti" class="anchor"></a><code><span class="keyword">val</span> fold_lefti : <span>(int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>List.fold_left</code> with indices</p></dd></dl><dl><dt class="spec value" id="val-fold_left_mapi"><a href="#val-fold_left_mapi" class="anchor"></a><code><span class="keyword">val</span> fold_left_mapi : <span>(int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> * <span class="type-var">'c</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> * <span><span class="type-var">'c</span> list</span></code></dt><dd><p><code>List.fold_left_map</code> with indices</p></dd></dl><dl><dt class="spec value" id="val-roll"><a href="#val-roll" class="anchor"></a><code><span class="keyword">val</span> roll : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span></code></dt><dd><p>リストを &quot;回転&quot; する</p><ul><li><code>roll [1; 2; 3; 4] ---&gt; [2; 3; 4; 1]</code></li><li>TODO: もっと効率の良い実装にする．キューを使うなど</li></ul></dd></dl><dl><dt class="spec value" id="val-whileM"><a href="#val-whileM" class="anchor"></a><code><span class="keyword">val</span> whileM : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Monadic while. Tail recursive.</p><dl><dt>parameter f</dt><dd><p>Option 型を返す関数</p></dd></dl><dl><dt>parameter x</dt><dd><p>最初の入力値</p></dd></dl><dl><dt>returns</dt><dd><p>f をゼロ回以上適用して None になったら，その直前の x を返す</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-dropLast1"><a href="#val-dropLast1" class="anchor"></a><code><span class="keyword">val</span> dropLast1 : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span></code></dt><dd><p>リストの末尾を除去したリストを返す</p></dd></dl><dl><dt class="spec value" id="val-get_dup_opt"><a href="#val-get_dup_opt" class="anchor"></a><code><span class="keyword">val</span> get_dup_opt : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span></code></dt><dd><p>リストの要素の重複を取得する</p></dd></dl><dl><dt class="spec value" id="val-filter_mapi"><a href="#val-filter_mapi" class="anchor"></a><code><span class="keyword">val</span> filter_mapi : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span></code></dt><dd><p>filter_map with indices</p></dd></dl><dl><dt class="spec value" id="val-shuffle"><a href="#val-shuffle" class="anchor"></a><code><span class="keyword">val</span> shuffle : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span></code></dt><dd><p>randomize list</p></dd></dl></div></body></html>