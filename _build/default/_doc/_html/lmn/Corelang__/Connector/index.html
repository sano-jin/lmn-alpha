<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Connector (lmn.Corelang__.Connector)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">lmn</a> &#x00BB; <a href="../index.html">Corelang__</a> &#x00BB; Connector</nav><h1>Module <code>Corelang__.Connector</code></h1></header><aside><p>absorb local fusions</p><ul><li>コネクタとシンボルアトムを分類する</li><li>吸収可能なコネクタは吸収させる</li></ul></aside><dl><dt class="spec value" id="val-classify_atom"><a href="#val-classify_atom" class="anchor"></a><code><span class="keyword">val</span> classify_atom : <span>(string * <span><span class="type-var">'a</span> list</span>)</span> <span>&#45;&gt;</span> <span><span>(string * <span><span class="type-var">'a</span> list</span>, <span class="type-var">'a</span> * <span class="type-var">'a</span>)</span> Stdlib.Either.t</span></code></dt><dd><p>アトムをコネクタかシンボルアトムかで分類する</p></dd></dl><dl><dt class="spec value" id="val-partition_atoms"><a href="#val-partition_atoms" class="anchor"></a><code><span class="keyword">val</span> partition_atoms : <span><span>(string * <span><a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> list</span>)</span> list</span> <span>&#45;&gt;</span> <span><span>(string * <span><a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> list</span>)</span> list</span> * <span><span>(<a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> * <a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a>)</span> list</span></code></dt><dd><p>アトムのリストをコネクタかシンボルアトムかで分類する</p></dd></dl><dl><dt class="spec value" id="val-find_fusion"><a href="#val-find_fusion" class="anchor"></a><code><span class="keyword">val</span> find_fusion : <span>(<a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> * <a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a>)</span> <span>&#45;&gt;</span> <span><span>(<a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> * <a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a>)</span> option</span></code></dt><dd><p>どちらか片方でも局所リンクに繋がれているような connector だった場合は Some で包んで返す</p><ul><li>つまり，吸収可能なコネクタを識別する</li><li>必ず，最初の要素が LocalLink であるようにする</li></ul></dd></dl><dl><dt class="spec value" id="val-substitute_link"><a href="#val-substitute_link" class="anchor"></a><code><span class="keyword">val</span> substitute_link : <span>(<span class="type-var">'a</span> * <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Z<code>Y/X</code></p><ul><li>ただし，X は局所リンク（であるという前提）</li></ul></dd></dl><dl><dt class="spec value" id="val-substitute_atom"><a href="#val-substitute_atom" class="anchor"></a><code><span class="keyword">val</span> substitute_atom : <span>(<a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> * <a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a>)</span> <span>&#45;&gt;</span> <span>(string * <span><a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> list</span>)</span> <span>&#45;&gt;</span> string * <span><a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> list</span></code></dt><dd><p>p(X_1, ..., X_m)<code>Y/Z</code></p></dd></dl><dl><dt class="spec value" id="val-absorb_fusion"><a href="#val-absorb_fusion" class="anchor"></a><code><span class="keyword">val</span> absorb_fusion : <span>(<span><span>(string * <span><a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> list</span>)</span> list</span> * <span><span><span>(<a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> * <a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a>)</span> list</span> list</span> * <span><span>(<a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> * <a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a>)</span> list</span>)</span> <span>&#45;&gt;</span> <span><span>(<span><span>(string * <span><a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> list</span>)</span> list</span> * <span><span><span>(<a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> * <a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a>)</span> list</span> list</span> * <span><span>(<a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> * <a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a>)</span> list</span>)</span> option</span></code></dt><dd><p>吸収可能なコネクタがあった場合は吸収して，Some で包んで返す</p><ul><li>これは一個のコネクタに関してしか処理しない．再帰呼び出しは <code>whileM</code> とかを後で使う</li><li><code>free_connectors</code> は元々のアトムのリスト中に出現したコネクタのリストを反転させたもののリストを反転させたもの</li></ul><dl><dt>parameter symbol_atoms</dt><dd><p>シンボルアトムのリスト</p></dd></dl><dl><dt>parameter free_connectors</dt><dd><p>引数が全て自由リンクなコネクタ（substitution もできない）のリストのリスト</p></dd></dl><dl><dt>parameter connectors</dt><dd><p>引数に局所リンクが残っている（かも知れない）コネクタのリスト</p></dd></dl><dl><dt>returns</dt><dd><p>(シンボルアトムのリスト，引数が全て自由リンクなコネクタのリストのリスト)</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-free_connector_of"><a href="#val-free_connector_of" class="anchor"></a><code><span class="keyword">val</span> free_connector_of : <span>(<a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> * <a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a>)</span> <span>&#45;&gt;</span> string * string</code></dt><dd><p>両方自由リンクに繋がれているコネクタを引数に取り，<code>FreeLink</code> コンストラクタを剥がす</p><ul><li>局所リンクが引数に来た場合はエラー</li><li>必ず，吸収可能なコネクタを全て吸収し終えた後に呼ぶ</li></ul></dd></dl><dl><dt class="spec value" id="val-normalize"><a href="#val-normalize" class="anchor"></a><code><span class="keyword">val</span> normalize : <span><span>(string * <span><a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> list</span>)</span> list</span> <span>&#45;&gt;</span> <span><span>(string * <span><a href="../Syntax/index.html#type-c_link">Corelang__.Syntax.c_link</a> list</span>)</span> list</span> * <span><span>(string * string)</span> list</span></code></dt><dd><p>どちらか片方でも閉じたリンクを繋げるコネクタを吸収させる</p><ul><li>アトムのリストを左から舐めていって，すでに吸収可能なコネクタが存在しないことがわかったものは <code>absorbed_atoms</code> に追加してやる</li><li>コネクタの吸収は，必ず局所リンクを substitution するので 吸収可能なコネクタではなかったもの（両方とも自由リンクに接続されていたコネクタ）が， substitution によって，吸収可能になることはない</li><li><code>absorbed_atoms</code> はアトムのリストのリストになっている</li></ul></dd></dl></div></body></html>